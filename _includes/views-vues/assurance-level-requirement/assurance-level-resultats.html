<!--Results-->
<section>

<h2>{{ site.Results[ page.lang ] }}</h2>

<!-- Results table -->
<table id="results-table" class="table table-bordered table-condensed">
<thead>
  <tr>
  {% assign rowNumber = 1 %}
  <th id="r{{ rowNumber }}h1">{{ page.detail["1"] }}</th>
  <td><span id="D1"></span></td>
  <th id="r{{ rowNumber }}h3">{{ page.detail["2"] }}</th>
  <td><span id="D2"></span></td>
  </tr>
  <tr>
  {% assign rowNumber = rowNumber | plus: 1 %}
  <th id="r{{ rowNumber }}h1">{{ page.detail["3"] }}</th>
  <td><span id="D3"></span></td>
  <th id="r{{ rowNumber }}h3">{{ page.detail["4"] }}</th>
  <td><span id="D4">{{ "now" | date: "%Y-%m-%d" }}</span></td>
  </tr>
</thead>
<tbody>
<tr>
{% assign rowNumber = rowNumber | plus: 1 %}
{% assign headerRowNumber = rowNumber %}
<th id="r{{ headerRowNumber }}h1">{{ site.Criteria[ page.lang ] }}</th>
<th id="r{{ headerRowNumber }}h2">{{ page.level }}</th>
<th id="r{{ headerRowNumber }}h3">{{ page.assessment }}</th>
<th id="r{{ headerRowNumber }}h4">{{ page.rational }}</th>
</tr>
{% for questionNumber in (1..8) %}{%
  assign questionNumberString = questionNumber | downcase %}{%
  assign questionString = page.questions[ questionNumberString ] %}{%
  assign rowNumber = rowNumber | plus: 1
%}<tr class="question-{{ questionNumber }}-ele question-row">
<th headers="r1h1" id="r{{ rowNumber }}h1">{{ questionString }}</th>
<td style="text-align: center; font-size: 30px;" class="Q{{ questionNumber }}-level">
  {% for level in (0..4) %}
  <span id="Q{{ questionNumber }}-L{{ level }}" class="hidden assurance-level-element"> {{ level }}</span>
  {% endfor %}
  <span id="Q{{ questionNumber }}-LNA" class="hidden"> N/A</span>
</td>
<td class="Q{{ questionNumber }}-assessment">
  {% for level in (0..4) %}{%
    assign assesmentString = questionNumberString | append: "-a" | append: level
  %}<span id="Q{{ questionNumber }}-A{{ level }}" class="hidden">{{ page.questions[assesmentString] }}</span>{%
  endfor %}
  <span id="Q{{ questionNumber }}-ANA" class="hidden"></span>
</td>
<td><span id="Q{{ questionNumber }}-rational"></span></td>
</tr>{%
endfor %}

<!-- Summary row -->
<tr style="border: solid; border-width: 2px;">
<th headers="r{{ headerRowNumber }}h1" id="r{{ rowNumber }}h1">{{ page.overallAssesment }}</th>
<td headers="r{{ headerRowNumber }}h2" id="r{{ rowNumber }}h2" style="text-align: center; font-size: 30px;" class="wb-calculate" data-wb-calculate='{ "onInit": true, "eventTrigger": "removeClass.action.wb-fieldflow", "operations": [
    { "type": "max", "query": ".question-row:not(.hidden) .assurance-level-element:not(.hidden)", "outputTarget": "#max-assurance-level-used" }]}'>
  <span id="max-assurance-level-used">0</span>
</td>
<td></td>
</tr>

</tbody>
</table>

<button type="button" class="btn btn-default">Download as PDF</button>
<button type="button" class="btn btn-default wb-format-gen" data-wb-format-gen='{ "type": "csv", "rowSelector": "tr:not(.hidden)", "colSelector": "th, td span:not(.hidden), .non-scoring-result td", "container": "#results-table", "filename": "assurance-level-assessment" }'>{{ site.DownloadCSV[page.lang] }}</button>
<button type="button" class="btn btn-default">Sent to TBS</button>

</section>
